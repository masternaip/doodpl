<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Paste Preview</title>
    <style>
        body {
            font-family: sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        #pasteArea {
            border: 2px dashed #ccc;
            padding: 50px;
            text-align: center;
            cursor: text;
            min-height: 100px;
            width: 80%;
            max-width: 600px;
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.2em;
            color: #777;
        }
        #previewContainer {
            margin-top: 20px;
            max-width: 100%;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }
        .previewImage {
            max-width: 200px;
            max-height: 200px;
            border: 1px solid #ddd;
            padding: 5px;
            box-shadow: 0 0 5px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <h1>Paste Image Here</h1>
    <div id="pasteArea" contenteditable="true">
        Paste an image (Ctrl+V or Cmd+V) here or type something...
    </div>
    <div id="previewContainer">
        </div>

    <script>
        const pasteArea = document.getElementById('pasteArea');
        const previewContainer = document.getElementById('previewContainer');

        pasteArea.addEventListener('paste', (event) => {
            event.preventDefault(); // Prevent default paste behavior (e.g., pasting text)

            const items = (event.clipboardData || event.originalEvent.clipboardData).items;

            for (const item of items) {
                if (item.type.startsWith('image/')) {
                    const blob = item.getAsFile(); // Get the image as a Blob object

                    if (blob) {
                        const img = document.createElement('img');
                        img.classList.add('previewImage');

                        // Use URL.createObjectURL for efficient preview
                        img.src = URL.createObjectURL(blob);

                        img.onload = () => {
                            // Revoke the object URL when the image is loaded to free up memory
                            URL.revokeObjectURL(img.src);
                        };

                        previewContainer.appendChild(img);

                        // Optionally, clear the placeholder text
                        if (pasteArea.textContent === 'Paste an image (Ctrl+V or Cmd+V) here or type something...') {
                            pasteArea.textContent = '';
                        }
                    }
                }
            }
        });

        // Optional: Clear the placeholder text when the user starts typing
        pasteArea.addEventListener('focus', () => {
            if (pasteArea.textContent === 'Paste an image (Ctrl+V or Cmd+V) here or type something...') {
                pasteArea.textContent = '';
            }
        });

        // Optional: Restore placeholder if pasteArea becomes empty
        pasteArea.addEventListener('blur', () => {
            if (pasteArea.textContent.trim() === '') {
                pasteArea.textContent = 'Paste an image (Ctrl+V or Cmd+V) here or type something...';
            }
        });
    </script>
</body>
</html>
